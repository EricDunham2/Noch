@{
	ViewBag.Title = "Chat";
	Layout = "~/Views/Shared/_Layout.cshtml";
}
<div id="messageArea">
	<ul id="discussion"></ul>
</div>
<div id="sideBar">

</div>
<div id="inputArea">
	<div id="messageContainer"><input class="input-lg form-control" type="text" id="message" /></div>
	<div id="sendBtnContainer">
		<button type="button" class="send-btn" id="sendmessage"><i class="fa fa-paper-plane-o" aria-hidden="true"></i></button>
	</div>
</div>
<div class="dropdown" id="mobileChatNav">
	<button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
		<i class="fa fa-bars fa-2x" aria-hidden="true"></i>
	</button>
	<ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
		<li><a href="#">Channels</a></li>
		<li><a href="#">Another action</a></li>
		<li><a href="#">Something else here</a></li>
		<li role="separator" class="divider"></li>
		<li><a href="#">Separated link</a></li>
	</ul>
</div>
<input type="hidden" id="displayname" />

<!--Add script to update the page and send messages.-->
<script type="text/javascript">
	$(function () {
		// Declare a proxy to reference the hub.
		var chat = $.connection.chatHub;
		// Create a function that the hub can call to broadcast messages.
		chat.client.broadcastMessage = function (name, message) {
			// Html encode display name and message.
			var encodedName = $('<div />').text(name).html();
			var encodedMsg = $('<div />').text(message).html();
			// Add the message to the page.
			$('#discussion').append('<li><strong>' + encodedName
				+ '</strong>:&nbsp;&nbsp;' + encodedMsg + '</li>');
		};
		// Get the user name and store it to prepend to messages.
		$('#displayname').val(prompt('Enter your name:', ''));
		// Set initial focus to message input box.
		$('#message').focus();
		// Start the connection.
		$.connection.hub.start().done(function () {
			$('#sendmessage').click(function () {
				// Call the Send method on the hub.
				chat.server.send($('#displayname').val(), $('#message').val());
				// Clear text box and reset focus for next comment.
				$('#message').val('').focus();
			});
		});
	});
</script>
